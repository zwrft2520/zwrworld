# 第 10 章：工具调用功能

## 10.1工具调用(Tool Calling)概念与价值

### 什么是工具调用

工具调用(ToolCalling)可以简单理解为让AI大模型"借用外部工具"来完成它自身无法实现的任务。

这些工具可以是各种形式，例如网络搜索引擎、外部API接口、数据库访问，或是特定功能的代码片段等。

举个例子，当用户询问"帮我查询上海今天的天气"时，AI本身并不掌握实时天气数据，这时它可以调用"天气查询工具"来获取并提供准确信息。

目前，工具调用技术已相当成熟，几乎所有主流的AI大模型和应用开发平台都已支持这一功能。


## 工具调用的工作原理

工具调用的工作原理其实很直观，工具调用并非由AI服务器直接调用这些工具，也不是将工具代码发送给AI服务器执行。AI只是提出请求，表达"我需要使用某个工具来完成任务"的意图。真正执行工具操作的是我们自己的应用程序，执行完毕后将结果返回给AI，让它继续处理。

以用户提问"编程导航网站有哪些热门文章?"为例，整个流程包括:

1.用户提出问题:"编程导航网站有哪些热门文章?"
2.应用程序将问题传递给AI大模型
3.大模型分析问题后，判断需要使用网页抓取工具获取信息
4.大模型指定工具名称和必要参数(网页抓取工具，URL为codefather.cn)
5.应用程序接收到工具调用请求，执行网页抓取操作
6.工具完成抓取并返回文章数据
7.应用程序将抓取结果传回给大模型
8.大模型分析网页内容，生成关于热门文章的回答
9.应用程序将大模型的回答展示给用户
表面上看起来是AI在调用工具，但实际上整个过程是由我们的应用程序控制的。AI只负责决定何时需要用工具以及需要什么参数，而真正执行工具操作的是我们自己的程序。
你可能会疑惑:为什么要这样设计?这样岂不是需要应用程序多次请求AI?为何不让AI服务器直接调用工具?


这个疑问很自然，但站在AI服务提供商的度考虑，你就能理解了。最关键的考量是安全性:AI模型不应直接接触你的API或系统资源，所有操作必须经由你的程序执行，这样你才能完全掌控AI的权限边界，明确它能做什么、不能做什么。
